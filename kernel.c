// -----------------------------------------------
// KillerGrass OS (KGOS) Kernel — краткое описание и справка
// -----------------------------------------------

// Скорре всего ты зашёл сюда в первую очередь чтобы посмотреть на мой код.
// Но на всякий случай расскажу про ОС и ядро.  
// Здесь пока что только загрузка ядра и вывод приветственного сообщения.
// В будущем здесь будет много всего интересного.

// -----------------------------------------------
// ОС и ядро
// -----------------------------------------------

// "Что такое ядро?"
// Ядро (kernel) — это основная часть ОС (Operating System), которая отвечает за управление всеми процессами и ресурсами.
// Оно также отвечает за загрузку и выгрузку программ и данных.
// Ядро также отвечает за взаимодействие с аппаратными ресурсами (hardware), такими как процессор (CPU), память (RAM), диски и сеть (network). За безопасность и защиту системы от внешних угроз и вообще всё.

// "Что такое ОС?"
// ОС (Operating System) — это система, которая управляет всеми процессами и ресурсами.
// ОС также отвечает за загрузку и выгрузку программ и данных.
// ОС также отвечает за взаимодействие с аппаратными ресурсами, такими как процессор, память, диски и сеть. За безопасность и защиту системы от внешних угроз и вообще всё.

// Расскажу проще:
// Пользователь — просто человек, который просит компьютер сделать что-то. ОС это принимает и подходит к ядру и говорит: "Вон для того чувака сделай вот это".
// Потом ядро принимает и говорит: "Хорошо, я сделаю это". Идёт к процессору и говорит: "Вот ты сделай это и отдай мне результат". Процессор выполняет задачу и отдаёт результат.
// Потом ядро принимает результат и отдаёт ОС, а ОС отдаёт пользователю.
// Вот такие пироги.

// KillerGrass OS (KGOS) Kernel
// Author: KillerGrass

#include "drivers/vga.h"
#include "libs/types.h"
#include "kgos.h"

void main() {
    // простая проверка - выводим символы напрямую в VGA буфер
    volatile char* vga = (volatile char*)0xB8000;
    vga[0] = 'K';
    vga[1] = 0x0F; // белый цвет
    vga[2] = 'E';
    vga[3] = 0x0F;
    vga[4] = 'R';
    vga[5] = 0x0F;
    vga[6] = 'N';
    vga[7] = 0x0F;
    vga[8] = 'E';
    vga[9] = 0x0F;
    vga[10] = 'L';
    vga[11] = 0x0F;
    
    // проверка и инициализация VGA драйвера (VGA driver init)
    vga_init();
    
    // устанавливаем синий фон сразу
    vga_set_background_color_and_clear(VGA_BLUE);
    vga_set_cursor(10, 10);
    
    // отладочная инфа
    vga_print_centered(1, "KillerGrass OS (KGOS) Kernel Boot", VGA_LIGHT_GREEN);
    vga_print_centered(2, "VGA initialized successfully", VGA_WHITE);
    vga_print_centered(3, "Starting KGOS main...", VGA_LIGHT_CYAN);

    // запускаем ОС
    kgos_main();
}

void _start() {
    main();
}